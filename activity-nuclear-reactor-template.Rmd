---
title: "Activity: Nuclear Reactors"
author: "Vydeepthi Dhulipalla"
output: html_notebook
---

```{r}
library(tidyverse)
install.packages("ggplot2")
library(ggplot2)

```

## Scrape the Data 

```{r}
#My code here.... 
library(rvest)

page <- "https://en.wikipedia.org/wiki/List_of_commercial_nuclear_reactors"
tableList <- page %>%
  read_html() %>%
  html_nodes(css = "table") %>%
  html_table(fill = TRUE)

View(tableList)
```


## Your turn: In what ways is the table tidy? How is it not tidy? Whatâ€™s different about it from a tidy table?

The table generated by the specified code is untidy. These are some of the causes why it is untidy:

Multiple observations per row: The table comprises multiple observations per row. Each row contains information about a particular nuclear reactor, but the reactor type, unit, country, and operator are all contained within a single row.
Multiple rows are spanned by column headings. The column headers of the table span multiple rows. The header row contains information about the reactor type, while the subsequent rows provide details about the unit, territory, and operator.
Duplicate information: The information regarding the type of reactor is replicated for each unit of the same type of reactor. This redundancy makes it difficult to adequately analyze the data.
```{r}
# Remove empty and missing values in column names
Japan <- Japan[, !(is.na(names(Japan)) | names(Japan) == "")]

# Clean the data by removing rows with missing values
Japan <- Japan[complete.cases(Japan), ]

# Convert columns to appropriate data types
Japan$`Capacity(MW)` <- as.numeric(Japan$`Capacity(MW)`)

# Print the cleaned Japan data
print(Japan)
```




## Your Turn: Plot Net Generation Capacity vs Construction Date

```{r}
library(ggplot2)

# Convert the construction date column to a date format
China$Beginbuilding <- as.Date(China$Beginbuilding, format = "%d %b %Y")

# Plot Net Generation Capacity vs Construction Date
ggplot(China, aes(x = Beginbuilding, y = `Capacity(MW)`)) +
  geom_point() +
  geom_line() +
  labs(x = "Construction Date", y = "Net Generation Capacity (MW)", title = "Net Generation Capacity vs Construction Date")




#my code here 
China <- tableList[[10]]
Japan <- tableList[[21]]
tableList[[10]]
```


## Your Turn: Scrape & Clean China Data (then merge with Japan)

```{r}
#my code here... 

# Remove empty and missing values in column names
China <- China[, !(is.na(names(China)) | names(China) == "")]

# Clean the data by removing rows with missing values
China <- China[complete.cases(China), ]

# Convert columns to appropriate data types
China$`Capacity(MW)` <- as.numeric(China$`Capacity(MW)`)

# Print the cleaned China data
print(China)

# Merge China and Japan data
merged_data <- bind_rows(China, Japan)

# View the merged data
View(merged_data)
```





## Your Turn: Reconstruct Info Graphic of Japan Reactors (or other country of interest)

```{r}


# Load required library
library(ggplot2)

# Create the ggplot using the "Japan" dataset
ggplot(Japan[-1, ], aes(x = Plantname, y = `Capacity(MW)`, fill = Status)) +
  geom_col() +
  labs(x = "Plant Name", y = "Capacity (MW)", fill = "Status") +
  theme_minimal() +
  labs(title = "Japan Reactors")


```